@page "/code/createRepository"
@using Radzen
@using Radzen.Blazor
@using System.Globalization
@using TFGDevopsApp.Core.Models.Plastic
@using TFGDevopsApp.Dtos.Plastic.Repositories
@inject IPlasticServices plasticServices


<RadzenTemplateForm Data="@repository" OnValidSubmit="@HandleValidSubmit">
    <RadzenRow Gap="2rem" Class="rz-p-0 rz-p-lg-4">
        <RadzenColumn Size="12" SizeMD="6">
            <RadzenStack>
                <RadzenFieldset Text="Crear Repositorio">
                    <RadzenStack Gap="1rem">
                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="12" SizeMD="4">
                                <RadzenLabel Text="Nombre" />
                            </RadzenColumn>
                        </RadzenRow>
                        <RadzenRow AlignItems="AlignItems.Center">
                            <RadzenColumn Size="12" SizeMD="4">
                                <RadzenLabel Text="Comment"/>
                            </RadzenColumn>
                            <RadzenColumn Size="12" SizeMD="8">
                                <RadzenTextBox Style="width: 100%;" Name="Comentarios" />
                            </RadzenColumn>
                        </RadzenRow>
                    </RadzenStack>
                </RadzenFieldset>
            </RadzenStack>
        </RadzenColumn>
    </RadzenRow>
    <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" Gap="1rem" Class="rz-mt-8 rz-mb-4">
        <RadzenButton ButtonType="ButtonType.Submit" Size="ButtonSize.Large" Icon="save" Text="Crear" />
    </RadzenStack>
</RadzenTemplateForm>


@* <ErrorBoundary>
    <RadzenText Style="font-family:monospace; font-size:xx-large" Text="Crear Repositorio"/>
    <EditForm Model="@repository">
        <RadzenTemplateForm TItem="CreateRepositoryResponseDto" Context="RepositoryContext">
            <RadzenFieldset>
                <RadzenRow>
                    <RadzenColumn Size="2">
                        <RadzenText Text="Nombre" JustifyContent="JustifyContent.Center" />
                    </RadzenColumn>
                    <RadzenColumn Size="6">
                        <RadzenFormField Label="Nombre">
                            <RadzenTextBox @bind-Value="@repository.Name" Placeholder="Nombre" Style="width:100%" />
                        </RadzenFormField>
                    </RadzenColumn>
                </RadzenRow>
                <RadzenRow>
                    <RadzenColumn Size="2">
                        <RadzenText Text="Servidor" JustifyContent="JustifyContent.Center" />
                    </RadzenColumn>
                    <RadzenColumn Size="6">
                        <RadzenFormField Label="MachineName">
                            <RadzenTextBox @bind-Value="@repository.MachineName" Placeholder="Servidor" Style="width:100%" />
                        </RadzenFormField>
                    </RadzenColumn>
                </RadzenRow>
                <RadzenRow>
                    <RadzenColumn Size="2">
                        <RadzenText Text="Comment" JustifyContent="JustifyContent.Center" />
                    </RadzenColumn>
                    <RadzenColumn Size="6">
                        <RadzenFormField Label="Comment">
                            <RadzenTextBox @bind-Value="@repository.Comment" Placeholder="Comentario" Style="width:100%" />
                        </RadzenFormField>
                    </RadzenColumn>
                </RadzenRow>
                <RadzenButton Click=@(args => OnCreate(args)) Text="Crear" Style="margin-top:20px" />
            </RadzenFieldset>
        </RadzenTemplateForm>
    </EditForm>
</ErrorBoundary> *@

@code {
    private CreateRepositoryResponseDto repository = new CreateRepositoryResponseDto();



    private async Task HandleValidSubmit()
    {
       
        await plasticServices.CreateRepositoryAsync(repository);
    }

}
