@page "/code/CreateWorkspace"
@using Radzen
@using Radzen.Blazor
@using TFGDevopsApp.Core.Models.Plastic
@inject IPlasticServices plasticServices

<ErrorBoundary>
    <RadzenText Style="font-family:monospace; font-size:xx-large" Text="Crear Workspace"/>
    <EditForm Model="@workspace" OnValidSubmit="@HandleValidSubmit">
        <RadzenTemplateForm TItem="WorkspaceRequestDto" Context="WorkspaceContext">
            <RadzenFieldset>
                <RadzenFormField Label="Nombre" >
                    <RadzenTextBox @bind-Value="@workspace.Name" Placeholder="Guid" Style="width:100%" />
                </RadzenFormField>
                <RadzenFormField Label="Guid">
                    <RadzenTextBox @bind-Value="@workspace.Guid" Placeholder="Name" Style="width:100%" />
                </RadzenFormField>
                <RadzenFormField Label="Path">
                    <RadzenTextBox @bind-Value="@workspace.Path" Placeholder="Path" Style="width:100%" />
                </RadzenFormField>
                <RadzenFormField Label="MachineName">
                    <RadzenTextBox @bind-Value="@workspace.MachineName" Placeholder="MachineName" Style="width:100%" />
                </RadzenFormField>
                <RadzenButton ButtonType="ButtonType.Submit" Text="Submit" Style="margin-top:20px" />
            </RadzenFieldset>
        </RadzenTemplateForm>
    </EditForm>
</ErrorBoundary>


@code {
    private WorkspaceRequestDto workspace = new WorkspaceRequestDto();

    private async Task HandleValidSubmit()
    {
        await plasticServices.CreateWorkSpaceAsync(workspace);
    }
}
